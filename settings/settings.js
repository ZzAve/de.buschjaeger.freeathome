/* eslint-disable no-unused-vars */
/* eslint-disable no-undef */
function displayLogs(lines) {
  $('#loglines').html(lines);
}

function updateLogs() {
  try {
    Homey.api('GET', 'logs/', null, (err, result) => {
      if (!err) {
        let lines = '';
        for (let i = (result.length - 1); i >= 0; i -= 1) {
          lines += `${result[i]}<br />`;
        }
        displayLogs(lines);
      } else {
        displayLogs(err);
      }
    });
  } catch (e) {
    displayLogs(e);
  }
}

function deleteLogs() {
  Homey.confirm(Homey.__('settings.tab2.deleteWarning'), 'warning', (error, result) => {
    if (result) {
      Homey.api('DELETE', 'logs/', null, (err) => {
        if (err) {
          Homey.alert(err.message, 'error'); // [, String icon], Function callback )
        } else {
          Homey.alert(Homey.__('settings.tab2.deleted'), 'info');
          updateLogs();
        }
      });
    }
  });
}

function showTab(tab) {
  $('.tab').removeClass('tab-active');
  $('.tab').addClass('tab-inactive');
  $(`#tabb${tab}`).removeClass('tab-inactive');
  $(`#tabb${tab}`).addClass('active');
  $('.panel').hide();
  $(`#tab${tab}`).show();
  updateLogs();
}

// function onHomeyReady(homeyReady) {
//   Homey = homeyReady;
//   showTab(1);
//   Homey.ready();
// }
